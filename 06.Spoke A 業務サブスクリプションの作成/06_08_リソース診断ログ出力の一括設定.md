# リソース診断ログ出力の一括設定

```bash
# ログ出力設定は以下 2 つの Permission が必要
# ① サブスクリプションやリソースに対して microsoft.insights/diagnosticSettings/write
# ② LAW に対して Microsoft.OperationalInsights/workspaces/sharedKeys/action
# 後者の権限はキーの列挙が可能な権限であるため、現場に渡せない
# このためガバナンスチーム側から設定を実施
 
# 業務システム統制チーム／③ 構成変更の作業アカウントに切り替え
if ${FLAG_USE_SOD} ; then az account clear ; az login -u "user_gov_change@${PRIMARY_DOMAIN_NAME}" -p "${ADMIN_PASSWORD}" ; fi
 
# スポーク A を対象にする
TEMP_TARGET_SUBSCRIPTION_IDS=$SUBSCRIPTION_ID_SPOKE_A
 
# リソース診断ログ出力の設定スクリプトを実行

```
